# End-to-end tests

This directory contains the fixture data used to bootstrap the individual e2e tests. Each sub-directory contains
two things:

1. A `state.json` file that represents a the saved state for the extension (see _Generating fixture data_ below)
2. A `db.js` file that exports a config for Ganache

The `db/` sub-sub-directory and its contents, should it exist, contains Ganache's state and a path to it is configured
in the `db.js` file.

## Generating fixture data

Fixture data can be generated by loading the unpacked extension, inspecting the background context,
dumping `chrome.storage.local`, and using [`copy`][1] to copy it to the clipboard, and manually pasting the contents into
a file on disk.

```js
chrome.storage.local.get(null, (x) => console.log(x))
// Store the value as a global (shown below)
copy(temp1)
```

Store the value as a global variable:

<img
  width="840"
  alt="Store as global variable"
  src="https://user-images.githubusercontent.com/1623628/60987884-1a2c4a00-a31d-11e9-932e-b7fab452e6bd.png"
/>

  [1]:https://developers.google.com/web/tools/chrome-devtools/console/utilities
